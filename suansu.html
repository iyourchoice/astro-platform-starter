<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™¾åŒ–åˆ†éšæœºæµ‹è¯•ï¼ˆæ‰‹æœºç‰ˆï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Arial", "å¾®è½¯é›…é»‘", sans-serif;
        }
        body {
            background-color: #f5f5f5;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            width: 100%;
            max-width: 400px;
            background: white;
            padding: 30px 20px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .title {
            font-size: 20px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        .question {
            font-size: 24px;
            text-align: center;
            margin-bottom: 25px;
            color: #222;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        #answerInput {
            flex: 1;
            padding: 12px 15px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            outline: none;
            text-align: center;
        }
        #answerInput:focus {
            border-color: #4299e1;
        }
        .btn {
            padding: 12px 20px;
            font-size: 16px;
            font-weight: 500;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .submit-btn {
            background-color: #4299e1;
            color: white;
            width: 100%;
            margin-bottom: 15px;
        }
        .submit-btn:hover {
            background-color: #3182ce;
        }
        .next-btn {
            background-color: #48bb78;
            color: white;
            width: 100%;
            display: none;
        }
        .next-btn:hover {
            background-color: #38a169;
        }
        .feedback {
            height: 30px;
            text-align: center;
            font-size: 18px;
            margin-bottom: 15px;
            font-weight: 500;
        }
        .correct {
            color: #48bb78;
        }
        .wrong {
            color: #e53e3e;
        }
        .answer-hint {
            text-align: center;
            font-size: 17px;
            color: #666;
            margin-top: 10px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">ç™¾åŒ–åˆ†éšæœºæµ‹è¯•</h1>
        <div class="question" id="question"></div>
        <div class="input-group">
            <input type="text" id="answerInput" placeholder="è¾“å…¥ç™¾åˆ†æ•°ï¼ˆä¾‹ï¼š50% æˆ– 33.3%ï¼‰">
        </div>
        <button class="btn submit-btn" id="submitBtn">æäº¤ç­”æ¡ˆ</button>
        <button class="btn next-btn" id="nextBtn">ä¸‹ä¸€é¢˜</button>
        <div class="feedback" id="feedback"></div>
        <div class="answer-hint" id="answerHint"></div>
    </div>

    <script>
        // ç™¾åŒ–åˆ†é¢˜åº“ï¼ˆå®Œæ•´å¯¹åº”å…³ç³»ï¼‰
        const questionBank = [
            { fraction: "1/2", answer: "50%" },
            { fraction: "1/2.5", answer: "40%" },
            { fraction: "1/3", answer: "33.3%" },
            { fraction: "1/3.5", answer: "28.6%" },
            { fraction: "1/4", answer: "25%" },
            { fraction: "1/4.5", answer: "22.2%" },
            { fraction: "1/5", answer: "20%" },
            { fraction: "1/5.5", answer: "18.2%" },
            { fraction: "1/6", answer: "16.7%" },
            { fraction: "1/6.5", answer: "15.4%" },
            { fraction: "1/7", answer: "14.3%" },
            { fraction: "1/7.5", answer: "13.3%" },
            { fraction: "1/8", answer: "12.5%" },
            { fraction: "1/8.5", answer: "11.8%" },
            { fraction: "1/9", answer: "11.1%" },
            { fraction: "1/9.5", answer: "10.5%" },
            { fraction: "1/10", answer: "10%" },
            { fraction: "1/10.5", answer: "9.5%" },
            { fraction: "1/11", answer: "9.1%" },
            { fraction: "1/11.5", answer: "8.7%" },
            { fraction: "1/12", answer: "8.3%" },
            { fraction: "1/12.5", answer: "8%" },
            { fraction: "1/13", answer: "7.7%" },
            { fraction: "1/13.5", answer: "7.4%" },
            { fraction: "1/14", answer: "7.1%" },
            { fraction: "1/14.5", answer: "6.9%" },
            { fraction: "1/15", answer: "6.7%" },
            { fraction: "1/15.5", answer: "6.5%" },
            { fraction: "1/16", answer: "6.25%" },
            { fraction: "1/16.5", answer: "6%" },
            { fraction: "1/17", answer: "5.9%" },
            { fraction: "1/18", answer: "5.6%" },
            { fraction: "1/19", answer: "5.3%" },
            { fraction: "1/2.4", answer: "42%" },
            { fraction: "1/2.7", answer: "37%" },
            { fraction: "1/2.1", answer: "48%" },
            { fraction: "1/20", answer: "5%" },
            { fraction: "1/25", answer: "4%" },
            { fraction: "1/1.9", answer: "53%" },
            { fraction: "1/1.6", answer: "62.5%" }
        ];

        let currentQuestion = null;
        const questionEl = document.getElementById("question");
        const answerInput = document.getElementById("answerInput");
        const submitBtn = document.getElementById("submitBtn");
        const nextBtn = document.getElementById("nextBtn");
        const feedbackEl = document.getElementById("feedback");
        const answerHintEl = document.getElementById("answerHint");

        // éšæœºè·å–ä¸€é¢˜ï¼ˆä¸é‡å¤ï¼‰
        let usedIndices = [];
        function getRandomQuestion() {
            if (usedIndices.length >= questionBank.length) usedIndices = []; // é‡ç½®é¢˜åº“
            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * questionBank.length);
            } while (usedIndices.includes(randomIndex));
            usedIndices.push(randomIndex);
            return questionBank[randomIndex];
        }

        // åˆå§‹åŒ–é¢˜ç›®
        function initQuestion() {
            currentQuestion = getRandomQuestion();
            questionEl.textContent = `1/2=50%`;
            questionEl.textContent = `${currentQuestion.fraction} = ?`;
            answerInput.value = "";
            feedbackEl.textContent = "";
            answerHintEl.style.display = "none";
            submitBtn.style.display = "block";
            nextBtn.style.display = "none";
            answerInput.focus();
        }

        // éªŒè¯ç­”æ¡ˆï¼ˆå¿½ç•¥ç©ºæ ¼ã€å¤§å°å†™ï¼Œè¿‘ä¼¼å€¼å…è®¸Â±0.1%è¯¯å·®ï¼‰
        function checkAnswer(userAnswer) {
            const standardAnswer = currentQuestion.answer.replace("%", "").trim();
            const userAnswerClean = userAnswer.replace("%", "").trim();
            
            // å¤„ç†å°æ•°å’Œæ•´æ•°çš„æ¯”è¾ƒ
            const standardNum = parseFloat(standardAnswer);
            const userNum = parseFloat(userAnswerClean);
            
            if (isNaN(userNum)) return false;
            // å…è®¸Â±0.1%çš„è¯¯å·®ï¼ˆé€‚é…è¿‘ä¼¼å€¼ï¼‰
            return Math.abs(userNum - standardNum) <= 0.1;
        }

        // æäº¤ç­”æ¡ˆ
        submitBtn.addEventListener("click", () => {
            const userAnswer = answerInput.value.trim();
            if (!userAnswer) {
                feedbackEl.textContent = "è¯·è¾“å…¥ç­”æ¡ˆï¼";
                feedbackEl.className = "feedback";
                return;
            }

            const isCorrect = checkAnswer(userAnswer);
            if (isCorrect) {
                feedbackEl.textContent = "æ­£ç¡®ï¼ğŸ‰";
                feedbackEl.className = "feedback correct";
            } else {
                feedbackEl.textContent = "é”™è¯¯ï¼âŒ";
                feedbackEl.className = "feedback wrong";
                answerHintEl.textContent = `æ­£ç¡®ç­”æ¡ˆï¼š${currentQuestion.answer}`;
                answerHintEl.style.display = "block";
            }

            submitBtn.style.display = "none";
            nextBtn.style.display = "block";
        });

        // ä¸‹ä¸€é¢˜
        nextBtn.addEventListener("click", initQuestion);

        // é”®ç›˜å›è½¦æäº¤
        answerInput.addEventListener("keydown", (e) => {
            if (e.key === "Enter" && submitBtn.style.display === "block") {
                submitBtn.click();
            }
        });

        // åˆå§‹åŒ–ç¬¬ä¸€é¢˜
        initQuestion();
    </script>
</body>
</html>